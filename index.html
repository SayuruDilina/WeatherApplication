<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weather Forecast</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <link rel="stylesheet" href="style.css">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
</head>

<body>
    <div class="container">
        <div class="weather-tab">
            <input type="text" id="weatherTabSearchLocationTxt" placeholder="Enter your Location">
            <img id="wishImg" src="img/sun.jpg" alt="">
            <p id="wish">Good Afternoon</p>
            <i class='bx bx-search' id="iconSearch"></i>
            <div class="upcoming-Weather" id="UpcomingWeatherTab">
                <p id="txtWeatherChange">
                    <i class='bx bx-chevron-left' id="previousclickIcon"></i>
                    Upcoming Weather
                </p>
                <p id="headerMon">Monday</p>
                <p id="headerTue">Tuesday</p>
                <p id="headerWed">Wednesday</p>
                <p id="headerThu">Thursday</p>
                <p id="headerFri">Friday</p>
                <!-- <i class='bx bx-sun' id="MondayIcon"></i> -->
                <img src="img/113.webp" alt="" id="MondayImg">
                <img src="img/353.webp" alt="" id="TuesdayImg">
                <img src="img/296.webp" alt="" id="WednesdayImg">
                <img src="img/389.webp" alt="" id="ThursdayImg">
                <img src="img/122.webp" alt="" id="FridayImg">
                <p id="tempretureMonTxt"> 25°</p>
                <p id="tempretureTueTxt"> 27°</p>
                <p id="tempretureWedTxt"> 30°</p>
                <p id="tempretureThuTxt"> 24°</p>
                <p id="tempretureFriTxt"> 23°</p>
            </div>

            <div class="moredetails">
                <h2>More details of today weather</h2>
            </div>
            <div class="humidityTab">
                <img id="humidtyImg" src="img/humidity.png" alt="">
                <h4 class="HeadSmallTab" id="humidHead">Humidity</h4>
                <!-- <input type="text" id="humidTxt" maxlength="4" size="4"> -->
                <p class="txtSmallTab" id="humidTxt">82%</p>
            </div>
            <div class="WindTab">
                <img id="windImg" src="img/wind.png" alt="">
                <h4 class="HeadSmallTab" id="windHead"> Wind</h4>
                <p class="txtSmallTab" id="windtxt">8 km/h</p>
            </div>
            <div class="SunRise-setTab">
                <h4 id="SunRiseHead">Sun Rise</h4>
                <img src="img/sun.jpg" alt="" id="sunImg">
                <p id="sunRise">6.36 a.m</p>
                <h4 id="SunSetHead">Sun Set</h4>
                <img src="img/moon.jpg" alt="" id="sunsetImg">
                <p id="sunset">18.30 p.m</p>
            </div>
            <div class="CloudsTab">
                <img id="cloudImg" src="img/cloud.png" alt="">
                <h4 class="HeadSmallTab" id="cloudshead"> Clouds</h4>
                <p class="txtSmallTab" id="cloudstxt">75</p>
            </div>
            <div class="UVIndexTab">
                <img id="uvImg" src="img/uv-sunlight.png" alt="">
                <h4 class="HeadSmallTab"> UV Index</h4>
                <p class="txtSmallTab" id="UVindexTxt">0.73</p>
            </div>
            <div class="FellsLokeTab">
                <img id="themoImg" src="img/thermometer.png" alt="">
                <h4 class="HeadSmallTab">Feels Like </h4>
                <p class="txtSmallTab" id="feelsLikeTxt">30 °C</p>
            </div>
        </div>
        <div class="container">
            <div class="side-tab">
                <!-- <input type="text" id="locationSideTabTxt"> -->
                <p id="locationSideTabTxt">
                    <img id="locationImg" src="img/lcation.png" alt="">
                    New York,USA
                </p>
                <!-- <h2 id="degressSodeTab">0</h2> -->
                <i class='bx bx-chevron-right' id="nextIcon"></i>
                <i class='bx bx-chevron-left' id="previousIcon"></i>
                <p id="TempretureTxtSideTab">27°C</p>
                <p id="weathercondition">
                    <img src="img/icons8-thermometer-48 (1).png" alt="" id="markIcon">
                    Sunny
                </p>
                <p id="currentdate-time">Wednesday,August29 at 17:16</p>
                <div id="weather-icon">
                    <img src="img/113.webp" alt="" id="CurrentLocWCImg">
                </div>

            </div>
        </div>


        <script src="https://unpkg.com/boxicons@2.1.4/dist/boxicons.js"></script>
        <!-- <script src="app.js"></script> -->

        <script>
            const d = new Date("2024-08-31");
            let day = d.getDate();
            let month = d.getMonth();
            //  console.log(month);

            if (month == 7 && day == 31) {
                let future = 0;
                let futureday = future + 1;
                // console.log(futureday);
            }
            let previous = day + 5;
            //      console.log(day);
            //   console.log(previous);



            const inputlocation = $("#weatherTabSearchLocationTxt");
            const tempretureTxt = $("#TempretureTxtSideTab")
            let lattiude;
            let lon;

            WEATHER_API = `http://api.weatherapi.com/v1/current.json?key=84a486dbf73c4638baa51830242908&q=`;

            $("#iconSearch").click(function () {
                fetch(WEATHER_API + inputlocation.val()).then((res) => res.json()).then((data) => {
                    console.log(data);
                    let tempreture = Math.round(`${data.current.temp_c}`)
                    tempretureTxt.text(tempreture + "°C");
                    $("#locationSideTabTxt").html(`<img id="locationImg" src="img/lcation.png" alt=""> ${data.location.name},${data.location.country} `);
                    $("#weathercondition").html(`<img src="img/icons8-thermometer-48 (1).png" alt="" id="markIcon"> ${data.current.condition.text}`);
                    const lastupdated = new Date(data.current.last_updated);
                    const formatdate = new Intl.DateTimeFormat(`en-US`, {
                        weekday: 'long',
                        month: 'long',
                        day: 'numeric',
                        hour: 'numeric',
                        minute: 'numeric',
                        hour12: true
                    }).format(lastupdated);
                    $("#currentdate-time").text(`${formatdate}`);
                    $("#CurrentLocWCImg").attr("src", `${data.current.condition.icon}`);
                    //code next will be here
                    $("#humidTxt").text(`${data.current.humidity}`);
                    const wind = `${data.current.wind_kph}`;
                    let correctwind = Math.round(wind);
                    $("#windtxt").text(correctwind + "km/h")
                    lattiude = `${data.location.lat}`;
                    lon = `${data.location.lon}`;
                    SUNRISE_SUNSET_API = `https://api.sunrisesunset.io/json?lat=${lattiude}&lng=${lon}`;
                    fetch(SUNRISE_SUNSET_API).then((res) => res.json()).then((data) => {
                        $("#sunRise").text(`${data.results.sunrise}`);
                        $("#sunset").text(`${data.results.sunset}`);
                    });
                    $("#cloudstxt").text(`${data.current.cloud}`);
                    $("#UVindexTxt").text(`${data.current.uv}`)
                    $("#feelsLikeTxt").text(`${data.current.feelslike_c}°C`);
                    let getDay = `${data.location.localtime}`;
                    const setdate = new Date(getDay);
                    console.log("setdate:" + setdate);

                    let date = setdate.getDate();
                    let month = setdate.getMonth();
                    let year = setdate.getFullYear();
                    const headers = [
                        "#headerMon",
                        "#headerTue",
                        "#headerWed",
                        "#headerThu",
                        "#headerFri"

                    ]
                    const temperatures = [
                        "#tempretureMonTxt",
                        "#tempretureTueTxt",
                        "#tempretureWedTxt",
                        "#tempretureThuTxt",
                        "#tempretureFriTxt"
                    ];
                    const images = [
                        "#MondayImg",
                        "#TuesdayImg",
                        "#WednesdayImg",
                        "#ThursdayImg",
                        "#FridayImg",

                    ]
                    if (month == 0 || month == 2 || month == 4 || month == 6 || month == 7 || month == 9 || month == 11 && date == 31 || date == 30 || date == 29 || date == 28 || date == 27 || date == 26) {
                        let futureDates = []
                        for (let i = 1; i <= 5; i++) {
                            let futureDate = new Date(year, month, date + i);

                            let futureYear = futureDate.getFullYear();
                            let futureMonth = futureDate.getMonth() + 1;
                            let futureDay = futureDate.getDate();

                            let paddedMonth = futureMonth.toString().padStart(2, '0');
                            let paddedDay = futureDay.toString().padStart(2, '0');

                            let setDate = `${futureYear}-${paddedMonth}-${paddedDay}`
                            futureDates.push(setDate);
                        }
                        WEATHER_API_FUTURE = `http://api.weatherapi.com/v1/marine.json?key=84a486dbf73c4638baa51830242908&q=${inputlocation.val()}&dt=`;
                        futureDates.forEach((setDate, index) => {
                            const weeksetDate = new Date(setDate)
                            const formatdate = new Intl.DateTimeFormat(`en-US`, {
                                weekday: 'long'
                            }).format(weeksetDate);
                            fetch(WEATHER_API_FUTURE + setDate).then((res) => res.json()).then((data) => {
                                $(temperatures[index]).text(`${data.forecast.forecastday[0].day.maxtemp_c}°`);
                                $(headers[index]).text(formatdate);

                                $(images[index]).attr("src", `${data.forecast.forecastday[0].day.condition.icon}`)
                            });
                        })

                    }

                });

            });


        </script>
</body>

</html>